{"version":3,"sources":["../../src/routes/verifyStraightBetWagerResult.js"],"names":["router","Router","use","oddHeader","JSON_ODD_KEY","get","authenticate","session","req","res","find","err","openBets","length","Promise","all","map","openBet","openBetIdx","event","eventID","BetDetail","OddType","headers","data","json","result","eventResult","Final","wagerResult","FinalType","BetType","OddTeamSide","BinaryScore","HomeSpreadPoint","Number","HomeScore","toFixed","AwayScore","AwaySpreadPoint","OddPoint","TotalPoint","OddTarget","orderStatus","finalResult","betType","agent","superAgent","playerUsername","orderTimePST","finalConfirmTimePST","unix","save","findOneAndRemove","_id","then","status"],"mappings":"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","file":"verifyStraightBetWagerResult.js","sourcesContent":["import express from 'express';\nconst router = express.Router();\nimport moment from 'moment';\nimport StraightBetWagerResult from '../models/StraightBetWagerResult';\nimport StraightOpenBetWager from '../models/StraightOpenBetWager';\n\nimport fetch from 'node-fetch';\n\nimport JwtStrategy from '../middleware/JwtStrategy';\nimport passport from \"passport\";\npassport.use(JwtStrategy);\n\nimport config from '../data/config';\nconst oddHeader = { \"JsonOdds-API-Key\": config.JSON_ODD_KEY };\n//import jsonSportArr from '../data/jsonSportArray';\n// const sortOddTypes = [\"Game\", \"First Half\", \"Second Half\", \"First Quarter\", \"Second Quarter\", \"Third Quarter\", \"Fourth Quarter\", \"First Period\", \"Second Period\", \"Third Period\", \"First Five Innings\", \"First Inning\"]\n// const sortSports = ['NBA', 'MLB', 'NCAAB', 'NCAAF', 'NFL', 'NHL', 'WNBA', 'SOCCER', 'TENNIS', 'BOXING', 'MMA', 'CRICKET', 'HORSE-RACING', 'KHL', 'AHL', 'SHL', 'HALL', 'LMP', 'NPB', 'KBO', 'GOLF', 'RUGBY', 'WBC']\n\n\n//, passport.authenticate('jwt', {session: false})\n\nrouter.get('/verify-straight-bet-wager-result', passport.authenticate('jwt', {session: false}), function(req, res){\n\tStraightOpenBetWager.find({}, function(err, openBets){\n\t\tif(openBets.length > 0){\n\t\t\tPromise.all(openBets.map(async function(openBet, openBetIdx){\n\t\t\t\tconst data = await fetch(`https://jsonodds.com/api/results/getbyeventid/${openBet.event.eventID}?oddType=${openBet.event.BetDetail.OddType}`, {headers: oddHeader})\n\t\t\t\tconst result = await data.json()\n\t\t\t\tconst eventResult = result[0]\n\t\t\t\tif(eventResult.Final === true){\n\t\t\t\t\topenBet.wagerResult = ''\n\t\t\t\t\tswitch(eventResult.FinalType){\n\t\t\t\t\t\tcase 'Finished':\n\t\t\t\t\t\t\tswitch(openBet.event.BetDetail.BetType){\n\t\t\t\t\t\t\t\tcase 'M Line':\n\t\t\t\t\t\t\t\t\tswitch(true){\n\t\t\t\t\t\t\t\t\t\tcase openBet.event.BetDetail.OddTeamSide === 'Home' && eventResult.BinaryScore === '1-0':\n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'won'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase openBet.event.BetDetail.OddTeamSide === 'Away' && eventResult.BinaryScore === '0-1': \n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'won'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase eventResult.BinaryScore === '1-1': \n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'tie'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'loss'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'Spread':\n\t\t\t\t\t\t\t\t\tconst HomeSpreadPoint = Number(eventResult.HomeScore).toFixed(2) - Number(eventResult.AwayScore).toFixed(2)\n\t\t\t\t\t\t\t\t\tconst AwaySpreadPoint = Number(eventResult.AwayScore).toFixed(2) - Number(eventResult.HomeScore).toFixed(2)\n\t\t\t\t\t\t\t\t\tswitch(true){\n\t\t\t\t\t\t\t\t\t\tcase HomeSpreadPoint >= 0 && openBet.event.BetDetail.OddPoint > 0 && openBet.event.BetDetail.OddTeamSide === 'Home':\n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'won'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase AwaySpreadPoint >= 0 && openBet.event.BetDetail.OddPoint > 0 && openBet.event.BetDetail.OddTeamSide === 'Away':\n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'won'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase HomeSpreadPoint > 0 && openBet.event.BetDetail.OddPoint >= 0 && openBet.event.BetDetail.OddTeamSide === 'Home':\n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'won'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase AwaySpreadPoint > 0 && openBet.event.BetDetail.OddPoint >= 0 && openBet.event.BetDetail.OddTeamSide === 'Away':\n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'won'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase openBet.event.BetDetail.OddPoint <= 0 && openBet.event.BetDetail.OddTeamSide === 'Home' && Number(eventResult.HomeScore).toFixed(2) + Number(openBet.event.BetDetail.OddPoint).toFixed(2) > Number(eventResult.AwayScore).toFixed(2):\n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'won'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase openBet.event.BetDetail.OddPoint <= 0 && openBet.event.BetDetail.OddTeamSide === 'Away' && Number(eventResult.AwayScore).toFixed(2) + Number(openBet.event.BetDetail.OddPoint).toFixed(2) > Number(eventResult.HomeScore).toFixed(2):\n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'won'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase HomeSpreadPoint === 0 && openBet.event.BetDetail.OddPoint === 0 && openBet.event.BetDetail.OddTeamSide === 'Home':\n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'tie'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase AwaySpreadPoint === 0 && openBet.event.BetDetail.OddPoint === 0 && openBet.event.BetDetail.OddTeamSide === 'Away':\n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'tie'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase openBet.event.BetDetail.OddPoint <= 0 && openBet.event.BetDetail.OddTeamSide === 'Home' && Number(eventResult.HomeScore).toFixed(2) + Number(openBet.event.BetDetail.OddPoint).toFixed(2) === Number(eventResult.AwayScore).toFixed(2):\n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'tie'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase openBet.event.BetDetail.OddPoint <= 0 && openBet.event.BetDetail.OddTeamSide === 'Away' && Number(eventResult.AwayScore).toFixed(2) + Number(openBet.event.BetDetail.OddPoint).toFixed(2) === Number(eventResult.HomeScore).toFixed(2):\n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'tie'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'loss'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'Total':\n\t\t\t\t\t\t\t\t\tconst TotalPoint = Number(eventResult.HomeScore) + Number(eventResult.AwayScore)\n\t\t\t\t\t\t\t\t\tswitch(true){\n\t\t\t\t\t\t\t\t\t\tcase openBet.event.BetDetail.OddTarget === 'Over' && openBet.event.BetDetail.OddPoint < TotalPoint :\n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'won'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase openBet.event.BetDetail.OddTarget === 'Under' && openBet.event.BetDetail.OddPoint > TotalPoint:\n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'won'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase openBet.event.BetDetail.OddPoint === TotalPoint:\n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'tie'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\topenBet.wagerResult = 'loss'\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\topenBet.orderStatus = 'completed'\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Canceled':\n\t\t\t\t\t\t\topenBet.orderStatus = 'canceled'\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Postponed':\n\t\t\t\t\t\t\topenBet.orderStatus = 'Postponed'\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tlet finalResult = new StraightBetWagerResult({\n\t\t\t\t\t\tbetType: openBet.betType,\n\t\t\t\t\t\tagent: openBet.agent,\t// who is agent\n\t\t\t\t\t\tsuperAgent: openBet.superAgent,\n\t\t\t\t\t\tplayerUsername: openBet.playerUsername,\n\t\t\t\t\t\tevent: openBet.event,\n\t\t\t\t\t\teventResult: eventResult,\n\t\t\t\t\t\twagerResult: openBet.wagerResult, // won / loss / tie // cancelled\n\t\t\t\t\t\torderStatus: openBet.orderStatus, // open / completed / cancelled\n\t\t\t\t\t\torderTimePST: openBet.orderTimePST, // use PST\n\t\t\t\t\t\tfinalConfirmTimePST: moment().unix()\n\t\t\t\t\t})\n\t\t\t\t\tawait finalResult.save()\n\t\t\t\t\tawait StraightOpenBetWager.findOneAndRemove({ _id: openBet._id})\n\n\t\t\t\t}\n\n\t\t\t})).then(function(){\n\t\t\t\tres.status(200)\n\t\t\t})\n\t\t\t\n\t\t}\n\n\n\t\tres.json('player has no open bets')\n\t})\n})\n\nexport default router"]}